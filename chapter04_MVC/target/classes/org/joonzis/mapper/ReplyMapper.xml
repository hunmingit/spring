<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.joonzis.mapper.ReplyMapper">


		<!-- 댓글 목록은 내림차순으로 조회 -->
		<!-- 댓글 수정은 댓글 내용, 수정 날짜 변경 조건은 댓글 번호 -->
		<!-- 댓글 등록 -->
		<insert id="insert" parameterType="org.joonzis.domain.ReplyVO">
			INSERT INTO tbl_reply (rno, bno, reply, replyer, replyDate, updateDate)
			VALUES(seq_reply.nextval, #{bno}, #{reply}, #{replyer}, sysdate, sysdate)		
		</insert>
		 
		<!-- 댓글 목록 -->
		<select id="getList" parameterType="int" resultType="org.joonzis.domain.ReplyVO">
			select * from tbl_reply where bno = #{bno} ORDER BY replydate DESC
		</select>
		
		<!-- 댓글 삭제 -->
		<delete id="delete" parameterType="int">
			delete from tbl_reply where rno = #{rno}
		</delete>
		
		<!-- 댓글 수정 -->			
		<update id="update" parameterType="org.joonzis.domain.ReplyVO">
			update tbl_reply 
			set  reply= #{reply}, updatedate = sysdate
			where rno = #{rno}
		</update>
		
		<!-- 댓글 읽기 -->
		<select id="read"  parameterType="int" resultType="org.joonzis.domain.ReplyVO">
			select * FROM tbl_reply where rno = #{rno}
		</select>
		
		<!-- 특정 게시물의 댓글 삭제 -->
		<delete id="deleteByBno" parameterType="int">
			delete from tbl_reply where bno = #{bno}
		</delete>
</mapper>
